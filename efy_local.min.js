let $head,$body,$root,$efy_module,efy_version="24.06.26 Beta",$=document.querySelector.bind(document),$all=document.querySelectorAll.bind(document),efy={},efy_lang={},efy_audio={volume:1},$save=()=>{},$add=(e,t={},a=[],o=document.body,s="beforeend")=>{const i=document.createElement(e);return Object.entries(t).forEach((([e,t])=>{i.getAttribute(e)!==t&&i.setAttribute(e,t)})),Array.isArray(a)||(a=[a]),a.forEach((e=>{if(Array.isArray(e)){const[t,a,o]=e,s=$add(t,a,o,i);i.appendChild(s)}else"string"==typeof e?i.textContent+=e:e instanceof Node&&i.appendChild(e)})),o.insertAdjacentElement(s,i),i},$text=(e,t,a)=>{a?e.insertAdjacentText(a,t):e.textContent=t},$css_prop=(e,t,a=$root)=>{if(!t){let t=getComputedStyle(a).getPropertyValue(e);return t.startsWith(" ")&&(t=t.slice(0,1)),t}a.style.setProperty(e,t)},$event=(e,t,a,o)=>{o?e.addEventListener(t,a,o):e.addEventListener(t,a)},$event_rm=(e,t,a,o)=>{o?e.removeEventListener(t,a,o):e.removeEventListener(t,a)},$ready=(e,t,a)=>{let o=document.documentElement;if(1==a)return new Promise((t=>{let a=$(e);a?t(a):new MutationObserver(((a,o)=>{Array.from($all(e)).forEach((e=>{t(e),o.disconnect()}))})).observe(o,{childList:!0,subtree:!0})})).then((()=>t(e.selector)));{let a,s=[{sel:e,fn:t}],i=()=>{for(let{sel:e,fn:t}of s){let a=Array.from($all(e));for(let e of a)e.$ready||(e.$ready=!0,t(e,e))}};a||(a=new MutationObserver(i).observe(o,{childList:!0,subtree:!0})),i()}},cursor_fn=e=>{let t=$("[efy_cursor]");t.style.left=e.pageX+"px",t.style.top=e.pageY+"px"},$audio_play=async(e,t)=>{try{e.pause(),e.currentTime=0,e.play(),"loop"==t&&$event(e,"ended",(()=>{e.pause(),e.currentTime=0,e.play()}),!1)}catch{}},$wait=(e,t)=>setTimeout(t,1e3*e),$$=(e,t)=>e.querySelector(t),$$all=(e,t)=>e.querySelectorAll(t),$notify=(e,t,a,o,s)=>{let i=[];const n={short:5,long:30,infinite:600},r=Date.now(),l="alert"+r,_=$(".efy_quick_notify i");let f=e=void 0!==n[e]?n[e]:e;const c=()=>{let e=$all(".efy_quick_notify_content [efy_alert]").length>0?"notify_active":"notify";_.setAttribute("efy_icon",e)};"lang"==o&&(t=efy_lang[t],a=efy_lang[a]),["[efy_alerts]",".efy_quick_notify_content"].map((o=>{const s="[efy_alerts]"==o?["div",{class:"time_left"},String(e)]:"";i.push($add("div",{efy_alert:"",class:l},[["div",{},[["h6",{},t],["p",{},a]]],["div",{class:"remove_timer"},[s,["button",{efy_btn_square:"",class:"remove"},[["i",{efy_icon:"remove"}]]]]]],$(o)))})),c(),efy_timer_interval=setInterval((()=>{const t=$(`.${l} .time_left`);f=e-Math.floor((Date.now()-r)/1e3),t?t.textContent=f:clearInterval(efy_timer_interval)}),1e3),s&&s(i),$wait(e,(()=>{clearInterval(efy_timer_interval);try{$(`[efy_alerts] .${l}`).remove()}catch{}c()}))},$sec_time=e=>`${Math.floor(e/3600).toString().padStart(2,"0")}:${Math.floor(e%3600/60).toString().padStart(2,"0")}:${Math.floor(e%60).toString().padStart(2,"0")}`;window.onload=async()=>{$root=$(":root"),$head=document.head,$body=document.body;let e,t,a=$css_prop("--efy_modules").replaceAll(" ","").split(",");$efy_module=e=>!!a.includes(e);try{localStorage.efy&&(efy=JSON.parse(localStorage.efy)),$save=()=>{localStorage.efy=JSON.stringify(efy)}}catch{$wait(2,(()=>{$add("div",{class:"efy_no_ls",efy_card:""},[["h6",{efy_lang:"localstorage_off"}],["p",{efy_lang:"localstorage_off_text"}]],$(".efy_sidebar > [efy_about]"),"afterend")}))}efy.folder=$css_prop("--efy_folder"),null==efy.lang_code&&(efy.lang_code=$css_prop("--efy_lang_code")),$add("link",{href:`${efy.folder}/lang/${efy.lang_code}.css`,rel:"stylesheet",efy_lang:""},[],$head),$add("link",{href:`${$css_prop("--efy_lang_folder")}/${efy.lang_code}.css`,rel:"stylesheet",efy_lang:"",class:"efy_lang_app_file"},[],$head);const o=()=>{$css_prop("--efy_100vh",(visualViewport.height*visualViewport.scale).toFixed(2)+"rem")};if(o(),$event(window.visualViewport,"resize",o),$event(window.visualViewport,"orientationchange",o),$add("div",{id:"efy_sidebar",class:"efy_sidebar",efy_search:"details:not(.efy_quick_shortcuts, [efy_logo]), .efy_sidebar [efy_tabs] > *"},[["div",{efy_about:""},[["div",{class:"efy_flex"},[["button",{class:"efy_about",efy_toggle:".efy_about_div",efy_logo:""},[["p",{},"EFY"],["p",{}," UI"]]],["button",{class:"efy_quick_notify efy_square_btn",efy_toggle:".efy_quick_notify_content",title:"Notifications"},[["i",{efy_icon:"notify"}]]],["button",{class:"efy_quick_search efy_square_btn",efy_toggle:"#efy_sidebar [efy_search_input]",title:"Search"},[["i",{efy_icon:"search"}]]],["button",{id:"efy_quick_toggle",efy_toggle:"#efy_quick",class:"efy_square_btn",title:"Quick shortcuts"},[["i",{efy_icon:"star"}]]]]],["button",{efy_sidebar_btn:"close",class:"efy_square_btn",title:"close"},[["i",{efy_icon:"remove"}]]]]],["div",{efy_card:"",class:"efy_about_div efy_hide_i"},[["mark",{efy_lang:"version"},[`: ${efy_version}`]],["p",{efy_lang:"sidebar_about_text"}],["div",{class:"efy_flex"},[["a",{href:"https://efy.ooo",role:"button",efy_lang:"website"}],["a",{href:"https://github.com/dragos-efy/efy",role:"button"},"Github"],["a",{href:"https://matrix.to/#/#efy_ui:matrix.org",role:"button"},"Matrix"],["a",{href:"https://translate.codeberg.org/projects/efy",role:"button",efy_lang:"translations"}]]]]],["div",{id:"efy_modules"}],["details",{id:"efy_sbtheme",efy_select:""},[["summary",{efy_lang:"theme"},[["i",{efy_icon:"star"}]]],["div",{efy_tabs:"efy_theme"},[["div",{class:"efy_tabs"}]]]]]]),$add("button",{efy_sidebar_btn:"absolute",title:"menu"},[["i",{efy_icon:"menu"}]]),$add("video",{class:"efy_3d_bg",autoplay:"",loop:"",muted:"",playsinline:""}),$efy_module("efy_quick")){let e=$("[efy_about]");$add("input",{type:"text",efy_search_input:"",class:"efy_hide_i",tabindex:"-1",placeholder:"Search through menu...",name:"efy_name"},[],e,"afterend"),$add("div",{class:"efy_quick_notify_content efy_hide_i",efy_card:""},[],e,"afterend"),$add("div",{id:"efy_quick",class:"efy_quick_shortcuts efy_hide_i",efy_card:""},[["div",{class:"efy_quick_buttons efy_flex"},[["div",{efy_clock:""}]]]],e,"afterend"),["reload","fullscreen","back","forward"].forEach(((e,t)=>{$add("button",{class:`efy_quick_${e} efy_square_btn`},[["i",{efy_icon:["reload","fullscreen","chevron","chevron"][t]}]],$(".efy_quick_buttons"))})),$event($(".efy_quick_reload"),"click",(()=>location.reload())),$ready(".efy_quick_fullscreen",(e=>{$event(e,"click",(()=>document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()))})),["back","forward"].map((e=>{$event($(`.efy_quick_${e}`),"click",(()=>window.history.go("back"===e?-1:1)))}))}["mode","colors","size","menu"].map((e=>{const t=`efy_theme_${e}`,a=[[],$("[efy_tabs=efy_theme] .efy_tabs")],o=$add("input",{efy_tab:e,type:"radio",id:t,name:"efy_theme_tabs"},...a),s=$add("div",{efy_content:e,efy_select:"",id:`efy_${e}`},[],$("[efy_tabs=efy_theme]"));$add("label",{efy_lang:e,for:t},...a),"mode"==e&&(o.setAttribute("efy_active",""),s.setAttribute("efy_active",""))})),t=$("#efy_sbtheme [efy_content=colors]");let s=$css_prop("--efy_color").split(", ");s.map(((e,t)=>s[t]=`${t+1} ${e}`));let i=efy.colors?String(efy.colors):s,n=$add("div",{id:"efy_gradient",efy_tabs:"container",efy_color:`${i}, range:1-18`},[],t);$add("div",{efy_lang:"angle",efy_range_text:"Angle"},[["input",{class:"efy_color_angle_input",type:"range",min:"0",max:"360",value:"165",step:"1"}]],t);const r=e=>{let[t,a,o,s,i]=[[],[],[],[],[]];const r=$$all(n,"[efy_content]");e||(e=$(".efy_color_angle_input").value+"deg"),r.forEach(((e,s)=>{t.push($$(e,".alpha").value);const n=`${$$(e,".lightness").value} ${$$(e,".chroma").value} ${$$(e,".hue").value}`;i.push(`${s+1} ${n} ${t[s]}`),a.push(`oklch(${n} / ${t[s]})`),o.push(`oklch(${n} / ${(t[s]/3).toFixed(2)})`)})),s=r.length>1?[a,o]:[`${a}, ${a}`,`${o}, ${o}`],efy.colors=i,$save(),["","_trans"].map(((t,a)=>$css_prop(`--efy_color${t}`,`linear-gradient(${e}, ${s[a]})`)))};if(efy.colors){let e=[[],[]];const t=efy.color_angle||`${$(".efy_color_angle_input").value}deg`;efy.colors.forEach((t=>{t=t.split(" ");for(let a=0;a<2;a++)e[a].push(`oklch(${t[1]} ${t[2]} ${t[3]} / ${0===a?t[4]:(t[4]/3).toFixed(2)})`),efy.colors.length<2&&e[a].push(...e[a])})),["","_trans"].map(((a,o)=>$css_prop(`--efy_color${a}`,`linear-gradient(${t}, ${e[o]})`)))}else $ready("#efy_gradient .alpha",r,1);$event($(".efy_color_angle_input"),"input",(()=>r())),$event(n,"input",(()=>r())),$event(n,"click",(e=>{const t=e.target;(t.matches(".color_add")||t.matches(".color_remove"))&&r()})),$add("div",{class:"efy_hr_div"},[["details",{efy_help:"custom_colors"},[["summary",{},[["p",{efy_lang:"custom_colors"}],["hr"]]],["div",{efy_lang:"custom_colors_help"}]]]],t),$add("div",{class:"efy_custom_colors",efy_color:"Text 0.5 0.2 0 1 efy_color_text, Background 0.7 0.2 100 1 efy_color_bgcol, Border 0.7 0.2 100 1 efy_color_bordercol, Button 0.7 0.2 100 1 efy_color_buttoncol"},[],t),$ready("[for=efy_color_buttoncol]",(()=>{["text","bgcol","bordercol","buttoncol"].map(((e,t)=>{const a=`efy_${e}_status`,o=[[],$(`.efy_custom_colors [efy_content="${t+1}"]`),"afterbegin"];$add("label",{for:a,efy_lang:"active"},...o),$add("input",{id:a,type:"checkbox"},...o),void 0!==efy[e]&&$css_prop(`--efy_color_${e}_var`,efy[e])})),"audio_status audio_click audio_hover outline text_status bgcol_status bordercol_status buttoncol_status trans_filter_menu".split(" ").forEach((e=>{"on"==efy[e]&&$(`#efy_${e}`).setAttribute("checked",""),$event($(`#efy_${e}`),"click",(()=>{"on"==efy[e]?delete efy[e]:efy[e]="on",$save()}))})),"on"==efy.outline&&$root.setAttribute("efy_outline",""),$("#efy_outline").onchange=()=>{$root.toggleAttribute("efy_outline")},"on"==efy.text_status&&$root.setAttribute("efy_color_text",""),$("#efy_text_status").onchange=()=>{$root.toggleAttribute("efy_color_text")},"on"==efy.bgcol_status&&$root.setAttribute("efy_color_bgcol",""),$("#efy_bgcol_status").onchange=()=>{$root.toggleAttribute("efy_color_bgcol")},"on"==efy.bordercol_status&&$root.setAttribute("efy_color_bordercol",""),$("#efy_bordercol_status").onchange=()=>{$root.toggleAttribute("efy_color_bordercol")},"on"==efy.buttoncol_status&&$root.setAttribute("efy_color_buttoncol",""),$("#efy_buttoncol_status").onchange=()=>{$root.toggleAttribute("efy_color_buttoncol")},$event($(".efy_custom_colors .efy_tabs"),"keydown",(e=>{const t=Array.from($all(".efy_custom_colors .efy_tabs .efy_tab input")),a=t.indexOf(document.activeElement);if("Tab"===e.key&&(e.shiftKey?t[0].focus():a!==t.length-1&&t[t.length-1].focus()),["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(e.key)){e.preventDefault();t[(a+(["ArrowRight","ArrowDown"].includes(e.key)?1:-1)+t.length)%t.length].focus()}}))}),1);const l=$add("div",{class:"efy_shadows"},[],t);let _=[];["button","trans"].map((e=>{const t=`shadow_${e}`,a=`.efy_shadows .efy_shadows_${e}`;let o=[];efy[t]&&(_.push(e),efy[t].map(((e,t)=>o.push(`${t+1} ${e.lightness} ${e.chroma} ${e.hue} ${e.alpha}`)))),$add("div",{class:"efy_hr_div"},[["p",{},`Shadows: ${e.charAt(0).toUpperCase()+e.slice(1)}`],["hr"]],l),$add("div",{class:`efy_shadows_${e}`,efy_color:(0===o.length?"":`${o}, `)+"range:0-10"},[],l),$ready(`${a} .alpha`,(()=>{const o=(a,o)=>{$css_prop(`--efy_${t}`,a),"button"===e&&$css_prop(`--efy_${t}_trans`,o)};if(efy[t]){let[e,s]=[[],[]];efy[t].map(((t,o)=>{const i=t,n=$(`${a} [efy_content="${o+1}"]`),[r,l,_,f]=[$$(n,".lightness"),$$(n,".chroma"),$$(n,".hue"),$$(n,".alpha")],c=[i.lightness,i.chroma,i.hue],y=`, oklch(${c})`;[[e,i.alpha],[s,(i.alpha/3).toFixed(2)]].map((e=>e[0].push(`${i.css} ${e[1]})`)))[(r.value,l.value,_.value,f.value)]=[...c,i.alpha],[[r,`oklch(0 0 0)${y}, #fff)`],[l,`oklch(0.5 0 0)${y})`],[f,`transparent${y})`]].forEach((e=>e[0].style.background=`linear-gradient(to right, ${e[1]}`))})),o(e,s)}$event($(a),"input",(()=>{if(event.target.matches("input")){let[s,i,n]=[[],[],[]];$all(`${a} [efy_content]`).forEach(((t,a)=>{const[o,r,l,_,f,c,y,d,$]=[$$(t,`#efy_shadow_${e}_inset${a}`).checked,$$(t,".x").value,$$(t,".y").value,$$(t,".blur").value,$$(t,".spread").value,$$(t,".lightness").value,$$(t,".chroma").value,$$(t,".hue").value,$$(t,".alpha").value],u=`${o?"inset ":""}${r}rem ${l}rem ${_}rem ${f}rem oklch(${c} ${y} ${d} /`;s.push({inset:o,x:r,y:l,blur:_,spread:f,lightness:c,chroma:y,hue:d,alpha:$,css:u}),[[i,$],[n,($/3).toFixed(2)]].map((e=>e[0].push(`${u} ${e[1]})`)))})),o(i,n),efy[t]=s,$save(),_.includes(e)||_.push(e),$root.setAttribute("efy_shadow",_)}}))}),1)})),_!==[]&&$root.setAttribute("efy_shadow",_);let f=0;$ready("[efy_color]",(e=>{const t=`colors_${Date.now()}${f}`;f++;let[a,o,s,i,n,r,l,c,y]=[[],[],[],[],[],[],[],1,9];e.setAttribute("efy_tabs",t),$add("div",{class:"efy_tabs",efy_select:""},[],e),e.getAttribute("efy_color").replaceAll(", ",",").split(",").map(((e,t)=>{let a=e.split(" "),_=a[0];a[0].includes("lang:")&&(_=a[0].replace("lang:","")),o[t]=_,s[t]=a[1]||null,i[t]=a[2]||null,n[t]=a[3]||null,r[t]=a[4]||null,l[t]=a[5]||null}));const d=o[o.length-1],$=d.includes("range"),u=$$(e,".efy_tabs");$&&([c,y]=d.replace("range:","").split("-"),[o,s,i,n,r,l].map((e=>e.pop())));let m,p=o.length;const b=$?"":" efy_hide_i",g=$?null:{tabindex:"-1"};bg="background: linear-gradient(to right,",[["add","plus"],["remove","remove"]].map((e=>{$add("button",{class:`color_${e[0]}${b}`,...g},[["i",{efy_icon:e[1]}]],u)})),["copy","paste"].map((e=>$add("button",{class:`efy_${e}`,title:e},[["i",{efy_icon:e}]],u)));const h=$$(e,".color_add"),v=$$(e,".color_remove"),k=$$(e,".efy_copy"),w=$$(e,".efy_paste"),x=()=>{$&&(p<y?h.classList.remove("efy_hide_i"):h.classList.add("efy_hide_i"),p>c?v.classList.remove("efy_hide_i"):v.classList.add("efy_hide_i")),p>c?(k.classList.remove("efy_hide_i"),w.classList.remove("efy_hide_i")):0==p&&(k.classList.add("efy_hide_i"),w.classList.add("efy_hide_i"))};x();const A=(a,_)=>{for(let f=a;f<_;f++){const a=String(f+1),c=`oklch(${s[f]} ${i[f]} ${n[f]} / ${r[f]})`,y=[["hue","hue",360,1,n[f]],["saturation","chroma",.37,.01,i[f],`${bg} oklch(.5 0 0), ${c})`],["brightness","lightness",1,.01,s[f],`${bg} oklch(0 0 0), ${c}, oklch(1 0 0))`],["alpha","alpha",1,.01,r[f],`${bg} oklch(0 0 0 / 0), ${c})`]].map((e=>["div",{efy_lang:e[0],efy_range_text:e[0]},[["input",{class:e[1],type:"range",min:0,max:e[2],step:e[3],value:e[4],style:e[5]}]]])),d=l[f]||`${t}_${a}`,$=$add("div",{efy_content:a},[...y],e);$add("input",{id:d,efy_tab:a,type:"radio",name:t},[],h,"beforebegin"),$add("label",{for:d,style:`background: ${c}`},o[f]||_,h,"beforebegin"),["button","trans"].map((t=>{if(e.classList.contains(`efy_shadows_${t}`)){let[e,a,o,s,i]=[!1,0,0,0,0];const n=`efy_shadow_${t}_inset${f}`,r=[[],$,"afterbegin"];if(efy[`shadow_${t}`]){const n=efy[`shadow_${t}`][f]||efy[`shadow_${t}`][f-1];[e,a,o,s,i]=[n.inset,n.x,n.y,n.blur,n.spread]}$add("label",{efy_lang:"inset",for:n},...r),$add("input",{id:n,type:"checkbox",...e?{checked:!0}:{}},...r),[["x",a],["y",o]].map((e=>$add("div",{efy_range_text:e[0],efy_lang:e[0]},[["input",{class:e[0],type:"range",min:"-30",max:"30",value:e[1],step:"1"}]],$))),$add("div",{efy_range_text:"blur",efy_lang:"blur"},[["input",{class:"blur",type:"range",min:"0",max:"50",value:s,step:"1"}]],$),$add("div",{efy_range_text:"spread",efy_lang:"spread"},[["input",{class:"spread",type:"range",min:"-20",max:"30",value:i,step:"1"}]],$)}}))}};A(0,p),$event(u,"click",(t=>{let a,l,f,d,$,u;const b=t.target;x();const g=b.matches(".efy_copy"),h=b.matches(".efy_paste"),v=b.matches(".color_add"),k=b.matches(".color_remove");if(0!==p&&(l=$$(e,"[efy_content][efy_active]")||$$(e,"[efy_content]:last-of-type"),a=l.getAttribute("efy_content")-1),(g||h)&&([f,d,$,u]=[$$(l,".lightness"),$$(l,".chroma"),$$(l,".hue"),u=$$(l,".alpha")]),v&&p<y)p++,m=p-1,[o[m],s[m],i[m],n[m],r[m]]=[String(p),s[a],i[a],n[a],r[a]],0===p?(A(0,1),l=$$(e,"[efy_content]"),a=l.getAttribute("efy_content")):A(m,p),$$(e,"[efy_tab]:last-of-type").click();else if(g){const e=`${f.value} ${d.value} ${$.value} ${u.value}`;navigator.clipboard.writeText(e),0!=efy.notify_clipboard&&$notify("short","Copied to clipboard",e)}else if(h)navigator.clipboard.readText().then((e=>{[f.value,d.value,$.value,u.value]=e.split(" "),$.dispatchEvent(new Event("input",{bubbles:!0}))})).catch();else if(k&&p>c){$$all(e,"[efy_tab], [efy_content], input[type=radio]").forEach((e=>e.remove())),[s,i,n,r].map((e=>e.splice(a,1))),p--,m=p-1,o=[];for(let e=1;e<=p;e++)o.push(String(e));if(A(0,p),0!==p){($$(e,`[efy_tab="${a+1}"]`)||$$(e,"[efy_tab]:last-of-type")).click()}else["button","trans"].map((t=>{e.classList.contains(`efy_shadows_${t}`)&&(_=_.filter((e=>e!==t)),$root.setAttribute("efy_shadow",_),delete efy[`shadow_${t}`],$save())}))}})),$event(e,"input",(t=>{let a=$$(e,"[efy_content]");const o=t.target;o.matches("[efy_tab]")&&($$all(e,"[efy_tab]").forEach((e=>e.removeAttribute("efy_active"))),$$all(e,"[efy_content]").forEach((e=>e.removeAttribute("efy_active"))),o.setAttribute("efy_active",""),$$(e,`[efy_content="${o.getAttribute("efy_tab")}"]`).setAttribute("efy_active","")),$$(e,"[efy_content][efy_active]")?a=$$(e,"[efy_content][efy_active]"):["tab","content"].map((t=>$$(e,`[efy_${t}]`).setAttribute("efy_active","")));const l=a.getAttribute("efy_content"),_=$$(e,`[efy_tab="${l}"] + label`),f=$$(a,".lightness").value,c=$$(a,".chroma").value,y=$$(a,".hue").value,d=$$(a,".alpha").value,$=`${f} ${c} ${y}`,u=[`.5 0 0), oklch(${f} ${c} ${y}))`,`0 0 0), oklch(.5 ${c} ${y}), oklch(1 0 0))`,`0 0 0 / 0), oklch(${f} ${c} ${y}))`];[".chroma",".lightness",".alpha"].map(((e,t)=>{$$(a,e).style.background="linear-gradient(to right, oklch("+u[t]})),_.style.background=`oklch(${$} / ${d})`,[s[l-1],i[l-1],n[l-1],r[l-1]]=[f,c,y,d],["text","bgcol","bordercol","buttoncol"].map((e=>{_.getAttribute("for")==`efy_color_${e}`&&($css_prop(`--efy_color_${e}_var`,$),efy[e]=$,$save())}))}))})),(()=>{const e=$("#efy_sbtheme [efy_content=mode]"),t=[["div",{class:"defaults"}],["p",{efy_lang:"custom"}],["div",{class:"custom"}]];$add("div",{class:"current_mode"},[["div",{class:"efy_mode_div"}],["div",{class:"efy_mode_type_div efy_hide_i"},[["details",{class:"system_light"},[["summary",{efy_lang:"light"}],...t]],["details",{class:"system_dark"},[["summary",{efy_lang:"dark"}],...t]],["input",{type:"checkbox",id:"system_theme_confirmation"}],["label",{for:"system_theme_confirmation",efy_lang:"confirm"}]]]],e)})(),"default switch_light switch_dark system".split(" ").map((e=>{const t=[[],$("#efy_sbtheme [efy_content=mode] .efy_mode_div")],a=`efy_mode_${e}`;e=e.replace("switch_",""),$add("input",{type:"radio",name:"efy_mode",id:a},...t),$add("label",{for:a,efy_lang:e},...t)})),$add("div",{class:"efy_hr_div"},[["details",{efy_help:"type",class:"efy_hide_i"},[["summary",{},[["p",{efy_lang:"type"}],["hr"]]],["div",{efy_lang:"sidebar_transparency_help"}]]]],$("#efy_sbtheme [efy_content=mode] .efy_mode_div"),"afterend"),"solid sepia nord black trans".split(" ").map((e=>{const t=[[],$("#efy_sbtheme .efy_mode_type_div")],a=[[],$("#efy_sbtheme .system_light .defaults")],o=[[],$("#efy_sbtheme .system_dark .defaults")];["_trans","light_","dark_"].forEach((t=>e=e.replace(new RegExp(t,"g"),"")));const s=`efy_mode_${e}`,i=`efy_mode_light_${e}`,n=`efy_mode_dark_${e}`;if($add("input",{type:"radio",name:"efy_mode_type",id:s},...t),$add("label",{for:s,efy_lang:e,class:"efy_hide_i"},...t),"solid"===e||"trans"===e){const t="solid"===e?{checked:""}:null;$add("input",{type:"radio",name:"efy_mode_system_light",id:i,...t},...a),$add("label",{for:i,efy_lang:e},...a),$add("input",{type:"radio",name:"efy_mode_system_dark",id:n,...t},...o),$add("label",{for:n,efy_lang:e},...o)}else"sepia"===e?($add("input",{type:"radio",name:"efy_mode_system_light",id:i},...a),$add("label",{for:i,efy_lang:e},...a)):($add("input",{type:"radio",name:"efy_mode_system_dark",id:n},...o),$add("label",{for:n,efy_lang:e},...o))})),$add("div",{class:"trans_window_div efy_hide_i"},[["input",{type:"checkbox",name:"trans_window",id:"trans_window"}],["label",{for:"trans_window",efy_lang:"window"}]],$("#efy_sbtheme [efy_content=mode] .efy_mode_type_div")),$add("div",{id:"efy_images_bg"},[["div",{class:"efy_hr_div"},[["details",{efy_help:"images"},[["summary",{},[["p",{efy_lang:"images"}],["hr"]]],["div",{efy_lang:"sidebar_images_warning_help"}]]]]],["div",{class:"efy_img_previews"},[["input",{id:"idb_addimg_bg",type:"file",accept:"image/*, video/*",style:"display: none"}],["label",{for:"idb_addimg_bg",title:"Add file",class:"efy_color",type:"button",role:"button"},[["i",{efy_icon:"plus"}]]],["input",{id:"idb_remove_toggle",type:"checkbox",style:"display: none"}],["label",{for:"idb_remove_toggle",title:"Remove",class:"efy_color",type:"button",role:"button"},[["i",{efy_icon:"remove"}]]],["button",{class:"efy_images_reset efy_hide_i",title:"reset"},[["i",{efy_icon:"reload"}]]]]]],$("#efy_sbtheme [efy_content=mode] .efy_mode_type_div"),"afterend");const c=$("#efy_sbtheme [efy_content=mode]");$add("details",{id:"efy_themes"},[["summary",{efy_lang:"saved_themes"},[["i",{efy_icon:"group"}]]],["hr"],["div",{class:"themes"},[["input",{type:"checkbox",id:"efy_theme_add",name:"efy_theme_add",class:"add efy_square_btn"}],["label",{for:"efy_theme_add",class:"add efy_square_btn",title:"Save"},[["i",{efy_icon:"arrow_down"}]]],["input",{type:"checkbox",id:"efy_theme_remove",name:"efy_theme_remove",class:"remove efy_square_btn"}],["label",{for:"efy_theme_remove",class:"remove efy_square_btn",title:"Remove"},[["i",{efy_icon:"remove"}]]],["input",{type:"checkbox",id:"efy_theme_edit",name:"efy_theme_edit",class:"edit efy_square_btn"}],["label",{for:"efy_theme_edit",class:"edit efy_square_btn",title:"Edit"},[["i",{efy_icon:"edit"}]]],["input",{type:"text",class:"name efy_square_btn efy_hide_i",placeholder:"Theme Name...",name:"efy_themes_name"}]]],["hr"],["p",{},["Find & Share more themes at ",["a",{href:"https://efy.ooo/themes"},"efy.ooo/themes"]]]],c);let y=0,d="",u="",m="",p=(e="efy")=>new Promise(((t,a)=>{const o=indexedDB.open(e);o.onerror=e=>a("efy: Can't open db"),o.onsuccess=e=>{d=o.result,t(d),0===y&&b(d),y++},o.onupgradeneeded=e=>{const t=e.target.result;"bg settings themes themes_system front back button trans".split(" ").map((e=>{t.createObjectStore(e,{keyPath:"id",autoIncrement:!0})}))}}));const b=e=>{const t=e.transaction(["themes","themes_system"],"readonly");t.objectStore("themes").getAll().onsuccess=e=>{u=e.target.result,u.forEach((e=>g(e)))},t.objectStore("themes_system").getAll().onsuccess=e=>{m=e.target.result[0]}},g=e=>{const t=$("#efy_theme_edit"),a=$add("button",{"data-id":e.id,spellcheck:!1},e.name,$$(c,".themes"));$event(a,"click",(a=>{const o=a.target;$("#efy_theme_remove").checked?(h("remove",Number(o.getAttribute("data-id"))),o.remove()):t.checked||(localStorage.efy=e.info,location.reload())})),$event(a,"input",(e=>{const a=e.target;t.checked&&h("edit",Number(a.getAttribute("data-id")),a.textContent)})),$event(a,"keypress",(e=>{if(" "===e.key||32===e.keyCode){const t=window.getSelection(),a=t.getRangeAt(0),o=a.startContainer.textContent,s=a.startOffset;e.target.textContent=o.slice(0,s)+" "+o.slice(s);for(let e=0;e<s+1;e++)t.modify("move","forward","character")}})),$wait(.1,(()=>{d.transaction(["themes_system"],"readonly").objectStore("themes_system").getAll().onsuccess=t=>{const a=t.target.result[0];["light","dark"].map((t=>{const o=a[t]===e.name?{checked:"true"}:null,s=[e.name,$$(c,`.system_${t} .custom`)],i=`efy_mode_system_${t}_${e.name}`;$add("input",{type:"radio",id:i,name:`efy_mode_system_${t}`,...o},...s),$add("label",{for:i},...s)}))}}))},h=(e,t,a)=>{const o=d.transaction(["themes"],"readwrite").objectStore("themes");if("remove"===e)o.delete(t);else if("edit"===e)o.get(t).onsuccess=e=>{const t=e.target.result;t.name=a,o.put(t)};else{$$all(c,".themes [data-id]").forEach((e=>e.remove()));const e=localStorage.efy;o.add({name:t,info:e}).onsuccess=e=>b(d)}},v=e=>{d.transaction(["themes_system"],"readwrite").objectStore("themes_system").getAll().onsuccess=t=>{(e=>{const t=u.find((t=>t.name===e));(()=>{try{efy=JSON.parse(t.info),$save()}catch{const e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";["dark,black"].includes(m[e])&&$root.setAttribute("efy_mode","dark,black")}$save()})(),$("#system_theme_confirmation").checked&&$("#efy_mode_system").checked?$notify("infinite",`Set Theme to "${t.name}?"`,"The page will reload","",(e=>{$add("div",{class:"answers"},[["button",{class:"yes",efy_lang:"yes"},[["i",{efy_icon:"reload"}]]],["button",{class:"empty",efy_lang:"no"},[["i",{efy_icon:"remove"}]]]],e[0]),$event($$(e[0],".yes"),"click",(()=>{location.reload()}))})):$("#efy_mode_system").checked||location.reload()})(t.target.result[0][e])}};if($event($("#efy_themes .add"),"click",(e=>{const t=$("#efy_themes .name"),a=t.value;t.classList.toggle("efy_hide_i"),a&&(h("add",a),t.value=""),$notify("short","Add Themes - "+(e.target.checked?"ON":"OFF"),"")})),$event($("#efy_themes .edit"),"click",(e=>{const t=e.target.checked;$all("#efy_themes .themes > button").forEach((e=>e.contentEditable=t)),$notify("short","Rename Themes - "+(t?"ON":"OFF"),"")})),$event($("#efy_themes .remove"),"click",(e=>{$notify("short","Remove Themes - "+(e.target.checked?"ON":"OFF"),"")})),$event($('.efy_sidebar [efy_content="mode"]'),"click",(e=>{const t=e.target,a=(e,t)=>e.classList.toggle("efy_hide_i",t),o=".efy_mode_type_div :is(.system_light, .system_dark), [for=system_theme_confirmation]";if($("#efy_mode_default").checked&&($("#efy_mode_trans").checked=!1),$all("[for=efy_mode_sepia]").forEach((e=>{a(e,!$("#efy_mode_switch_light").checked)})),$all("[for=efy_mode_solid], [for=efy_mode_nord], [for=efy_mode_black]").forEach((e=>{a(e,!$("#efy_mode_switch_dark").checked)})),$all("[efy_help=type], [for=efy_mode_solid], [for=efy_mode_trans], .efy_mode_type_div").forEach((e=>{a(e,!($("#efy_mode_switch_light").checked||$("#efy_mode_switch_dark").checked))})),$("#efy_mode_system").checked){const e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";$root.setAttribute("efy_mode",e),$("#efy_mode_trans").checked=!1,$all(`.efy_mode_type_div, ${o}`).forEach((e=>e.classList.remove("efy_hide_i")))}else $all(o).forEach((e=>e.classList.add("efy_hide_i")));$all("#efy_sbtheme .defaults label").forEach((e=>{a(e,!$("#efy_mode_system").checked)})),(t.matches("#efy_mode_switch_light")||t.matches("#efy_mode_switch_dark"))&&($("#efy_mode_solid").checked=!0),a($("#efy_mode_trans"),!$(".trans_window_div").checked),a($(".trans_window_div"),!$("#efy_mode_trans").checked),a($("#efy_images_bg"),$("#trans_window").checked)})),efy.mode){let e=efy.mode;const t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";$wait(.1,(()=>{const a=d.transaction(["themes_system"],"readwrite").objectStore("themes_system");a.getAll().onsuccess=o=>{const s=o.target.result[0],i=()=>{e=t,v(e),s.changed=e,a.put(s)};!0===s.status&&($("#efy_mode_system").click,$("#efy_mode_system").dispatchEvent(new Event("click",{bubbles:!0})),s.changed!==t&&i()),$("#system_theme_confirmation").checked=s.confirm,e.includes("system")&&i()}})),$root.setAttribute("efy_mode",e);const a=e.replace("dark,","").replace("light,","");try{e.includes("default")?$("#efy_mode_"+e).checked=!0:["light","dark"].some((t=>e.includes(t)))&&($("#efy_mode_switch_"+e).checked=!0,$("#efy_mode_switch_"+e).dispatchEvent(new Event("click",{bubbles:!0}))),["sepia","nord","black","trans"].some((e=>a.includes(e)))&&($("#efy_mode_"+a).checked=!0),a.includes("trans")&&$("#efy_mode_"+a).dispatchEvent(new Event("click",{bubbles:!0})),!0===efy.trans_window&&($("#trans_window").checked=!0)}catch{alert(e)}}else $root.setAttribute("efy_mode","default"),$("#efy_mode_default").setAttribute("checked","");$wait(.2,(()=>{const e=d.transaction(["themes_system"],"readwrite").objectStore("themes_system");e.getAll().onsuccess=t=>{const a=t.target.result;Array.isArray(a)&&0===a.length&&e.add({light:"light",dark:"dark",status:!1,confirm:!0})}})),$event($("#efy_mode_system"),"change",(e=>{$notify("short","WARNING - Alpha Testing","This feature is not stable yet");const t=d.transaction(["themes_system"],"readwrite").objectStore("themes_system");t.getAll().onsuccess=a=>{const o=a.target.result[0];o.status=e.target.checked,o.confirm=$("#system_theme_confirmation").checked,t.put(o)}})),$event($("#system_theme_confirmation"),"change",(e=>{const t=d.transaction(["themes_system"],"readwrite").objectStore("themes_system");t.getAll().onsuccess=e=>{const a=e.target.result[0];a.confirm=$("#system_theme_confirmation").checked,t.put(a)}}));const k=":is(.efy_mode_div, .efy_mode_type_div) > input";$all(k).forEach((e=>{$event(e,"change",(()=>{let e=[];if($all(`:is(${k}):checked`).forEach((t=>e.push(t.id.replace("efy_mode_","").replace("switch_","")))),e=String(e),e=[["default","default"],[",solid",e.replace(",solid","")],["light,nord","light"],["light,black","light"],["dark,sepia","dark"]].find((([t])=>e.includes(t)))?.[1]||e,e.includes("system")){const t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";v(t),e=t}$root.setAttribute("efy_mode",e),efy.mode=e,$save()}))})),$event(window.matchMedia("(prefers-color-scheme: dark)"),"change",(e=>{!0===m.active&&v(e.matches?"dark":"light")})),["light","dark"].map((e=>{$event($(`.system_${e}`),"change",(t=>{const a=t.target;if(a.matches("input")){const t=d.transaction(["themes_system"],"readwrite").objectStore("themes_system");t.getAll().onsuccess=o=>{const s=o.target.result[0];s[e]=a.id.replace("efy_mode_","").replace(`system_${e}_`,"").replace("_",",").replace(",solid",""),t.put(s);const i=s[e];(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")===e&&("light light,sepia light,trans dark dark,nord dark,black dark,trans".split(" ").includes(i)?($root.setAttribute("efy_mode",i),efy.mode=i,$save()):v(e))}}}))})),efy.trans_window&&(e=efy.trans_window,$root.classList.add("trans_window"),$("#trans_window").setAttribute("checked","")),$event($("#trans_window"),"change",(()=>{$root.classList.toggle("trans_window"),efy.trans_window=$("#trans_window").checked,$save()})),e=$("#efy_sbtheme [efy_content=size]"),$add("div",{efy_lang:"radius",efy_range_text:"Radius"},[["input",{class:"efy_radius_input",type:"range",min:"0",max:"25",value:"12",step:"1"}]],e),$add("div",{efy_lang:"border",efy_range_text:"Border"},[["input",{class:"efy_border_size_input",type:"range",min:"0",max:"8",value:"1.5",step:"0.1"}]],e),$add("div",{efy_lang:"gap",efy_range_text:"Gap alpha"},[["input",{class:"efy_gap_input",type:"range",min:"0",max:"30",value:"15",step:"1"}]],e),$add("div",{efy_lang:"max_width",efy_range_text:"Max Width alpha"},[["div",{class:"efy_max_width_div"},[["input",{class:"efy_maxwidth_input",type:"range",min:"500",max:"5000",value:"1200",step:"1"}],["select",{name:"efy_name"},[["option",{value:"rem"},"REM"],["option",{value:"%"},"%"]]]]]],e),e=["radius","border_size","gap","color_angle"];let w=["rem","rem","rem","deg"];e.forEach(((e,t)=>{let a=efy[e],o=$(`.efy_${e}_input`);a&&(o.value=a.replace(w[t],""),$css_prop(`--efy_${e}`,a)),$event(o,"input",(()=>{let a=o.value+w[t];$css_prop(`--efy_${e}`,a),efy[e]=a,$save()}))}));let x,A=$(".efy_maxwidth_input"),E='[efy_range_text*="Max Width"] select',S=$(E),L=efy.max_width;L?(x=L.replace("rem","").replace("%",""),A.value=x,$css_prop("--efy_body_width",L)):x=1200,A.oninput=()=>{let e=A.value;S=$(E).value,$css_prop("--efy_body_width",e+S),efy.max_width=e+S,$save()},S.oninput=()=>{"%"==S.value&&(A.setAttribute("min","10"),A.setAttribute("max","100"),A.setAttribute("value","100")),"rem"==S.value&&(A.setAttribute("min","500"),A.setAttribute("max","5000"),A.setAttribute("value","1200"));let e=A.value;S=$(E).value,$css_prop("--efy_body_width",e+S),efy.max_width=e+S,$save()};const q=$("#efy_sbtheme [efy_content=menu]");$add("details",{id:"efy_btn_align",efy_select:""},[["summary",{efy_lang:"button_position"}],["div"]],q),$add("details",{id:"efy_sidebar_align",efy_select:""},[["summary",{efy_lang:"menu"}],["div"]],q),["left","right"].map((e=>{const t=`efy_sidebar_align_${e}`,a=$("#efy_sidebar_align > div");$add("input",{type:"radio",name:"efy_sidebar_align",id:t},[],a),$add("label",{for:t,efy_lang:e},[],a)}));let j=efy.sidebar_align||"right";if(efy.sidebar_align&&$root.setAttribute("efy_sidebar",j),$(`#efy_sidebar_align_${j}`).setAttribute("checked",""),$all("[name=efy_sidebar_align]").forEach((e=>{const t=e.id.replace("efy_sidebar_align_","");$event(e,"click",(()=>{const e=$root.getAttribute("efy_sidebar").includes("on")?"on_":"";$root.setAttribute("efy_sidebar",e+t),efy.sidebar_align=t,$save()}))})),"left_top middle_top right_top left_middle middle_middle right_middle left_bottom middle_bottom right_bottom".split(" ").map((e=>{const t=$add("input",{type:"radio",name:"efy_btn_align",id:e},[],$("#efy_btn_align > div"));"middle_middle"==e&&t.setAttribute("disabled","")})),(()=>{let e=$css_prop("--efy_sidebar_button").replaceAll(" ","").split(","),a="efy_sidebar_btn_hide",o=$("#efy_btn_align"),s="beforeend",i=$("[efy_sidebar_btn*=absolute]");if($add("input",{type:"checkbox",name:a,id:a,checked:""},[],o,s),$add("label",{for:a,efy_lang:"floating_button"},[],o,s),!efy.sidebar_btn_status&&e.includes("off")&&(i.classList.add("efy_hide_i"),$("#"+a).removeAttribute("checked")),$event($("#"+a),"click",(()=>{i.classList.contains("efy_hide_i")?(efy.sidebar_btn_status="on",$save()):(delete efy.sidebar_btn_status,$save()),i.classList.toggle("efy_hide_i")})),a=$("[efy_sidebar_btn=absolute]"),t="efy_btn_align",efy.btn_align){let e=efy.btn_align;$("#"+e).setAttribute("checked",""),a.setAttribute(t,e)}else{let o=e[0];$("#"+o).setAttribute("checked",""),a.setAttribute(t,o)}$all("[name=efy_btn_align]").forEach((e=>{e.onclick=()=>{a.setAttribute(t,e.id),efy.btn_align=e.id,$save()}})),$event($body,"click",(()=>{let t=event.target;if(t.matches("[efy_sidebar_btn]")){let e="on";if(t.matches("[efy_sidebar_btn*=absolute]")&&a.classList.toggle("efy_hide_i"),$root.hasAttribute("efy_sidebar")){let t=$root.getAttribute("efy_sidebar"),a="";["left","right"].some((e=>t.includes(e)))&&(a=t.replace("on_","")),e=t.includes("on")?a:"on_"+a,$('.efy_sidebar [efy_sidebar_btn="close"]').focus()}$root.setAttribute("efy_sidebar",e)}t.matches(".efy_sidebar [efy_sidebar_btn*=close]")&&((e.includes("on")||"on"===efy.sidebar_btn_status)&&a.classList.toggle("efy_hide_i"),$wait(1,(()=>$("body [efy_sidebar_btn]:not(.efy_sidebar [efy_sidebar_btn])").focus())))}))})(),$add("details",{id:"efy_notifications",efy_select:""},[["summary",{efy_lang:"notifications"},[["mark",{efy_lang:"alpha"}]]],["div",{id:"efy_notify_status"}],["p",{},"Position"],["div",{id:"efy_notify_align"}]],$("#efy_sbtheme [efy_content=menu]")),"Offline Clipboard".split(" ").map((e=>{let t=`notify_${e.toLowerCase()}`,a=$("#efy_notifications #efy_notify_status");$add("input",{type:"checkbox",name:"efy_notify_status",id:e,checked:""},[],a),$add("label",{for:e},e,a);let o=$$(a,`#${e}`);0==efy[t]&&o.removeAttribute("checked"),$event(o,"change",(()=>{efy[t]=o.checked,$save()}))})),$ready("[efy_alerts]",(()=>{let e=$("[efy_alerts]"),t=$("#efy_notify_align");"left_top middle_top right_top left_bottom middle_bottom right_bottom".split(" ").map((a=>{$add("input",{type:"radio",name:"efy_notify_align",id:`notify_${a}`},[],t),$event($$(t,`#notify_${a}`),"change",(()=>{"left_top"==a?delete efy.notify_align:efy.notify_align=a,e.setAttribute("efy_alerts",a),$save()}))})),efy.notify_align&&e.setAttribute("efy_alerts",efy.notify_align),(efy.notify_align?$$(t,`#notify_${efy.notify_align}`):$$(t,"#notify_left_top")).checked=!0}),1),$efy_module("efy_filters")){$add("details",{id:"efy_vfilters",efy_select:""},[["summary",{efy_lang:"visual_filters"},[["i",{efy_icon:"dots"}]]],["div",{efy_tabs:"efyui_filters"},[["div",{class:"efy_tabs"}]]]],$(".efy_sidebar"));const a=[["brightness","blur","saturate","contrast","hue-rotate","sepia","invert"],["0","0","0","0.1","0","0","0"],["4","150","4","4","360","1","1"],["1","0","1","1","0","0","0"],["0.05","1","0.05","0.05","1","0.05","0.05"]];"bg content trans front back button".split(" ").map((e=>{const t="bg"==e?"background":e,o=`efy_vf_${e}`,s=[[],$("[efy_tabs=efyui_filters] .efy_tabs")],i=$add("input",{efy_tab:e,type:"radio",id:o,name:"efy_vf_tabs"},...s);if($add("label",{efy_lang:t,for:o},...s),"button"==e)$add("div",{efy_card:"",efy_lang:"coming_soon",efy_content:e,style:"margin: 0"},[],$("[efy_tabs=efyui_filters]"));else{const t=$add("form",{efy_content:e,efy_select:"",class:`efy_${e}_filter`,onsubmit:"return false"},[["button",{type:"reset",efy_lang:"reset"},[["i",{efy_icon:"reload"}]]]],$("[efy_tabs=efyui_filters]"));"brightness blur saturation contrast hue sepia invert".split(" ").map(((o,s)=>{$add("div",{efy_lang:o,efy_range_text:o},[["input",{class:`efy_${e}_${a[0][s]}`,type:"range",min:a[1][s],max:a[2][s],value:a[3][s],step:a[4][s]}]],t)})),"bg"==e&&[i,t].map((e=>e.setAttribute("efy_active","")))}})),e=$("[efy_tabs=efyui_filters] [efy_content=trans] [type=reset]"),t="efy_trans_filter_menu",$add("label",{for:t,efy_lang:"menu"},[],e,"afterend"),$add("input",{id:t,type:"checkbox"},[],e,"afterend"),e=$("[efy_tabs=efyui_filters] [efy_content=bg] [type=reset]"),t="efy_bg_size";let o="afterend";$add("div",{efy_lang:"size",efy_range_text:"bg_size",class:"efy_hide_i"},[["input",{class:"efy_bg_size",type:"range",min:10,max:3e3,value:300,step:10}]],e,o),$add("div",{efy_lang:"left",efy_range_text:"bg_position_x",class:"efy_hide_i"},[["input",{class:"bg_position_x",type:"range",min:-3e3,max:3e3,value:0,step:1}]],e,o),$add("div",{efy_lang:"up",efy_range_text:"bg_position_y",class:"efy_hide_i"},[["input",{class:"bg_position_y",type:"range",min:-3e3,max:3e3,value:0,step:1}]],e,o),$add("label",{for:t,efy_lang:"size"},[],e,o),$add("input",{id:t,type:"checkbox",efy_toggle:"[efy_range_text=bg_size], [efy_range_text=bg_position_x], [efy_range_text=bg_position_y]"},[],e,o),$event($("."+t),"input",(e=>$css_prop("--efy_bg_size",`${e.target.value}rem`))),$event($(".bg_position_x"),"input",(e=>$css_prop("--efy_bg_x",`${e.target.value}rem`))),$event($(".bg_position_y"),"input",(e=>$css_prop("--efy_bg_y",`${e.target.value}rem`)));for(let e=["bg","content","trans","front","back"],t=["[efy_mode*=trans] .efy_3d_bg {filter: ","img, video:not(.efy_3d_bg, .efy_3d_front, .efy_3d_back) {filter: ",":is(details:not([efy_help]), select, input, textarea, blockquote, pre, article, table, audio, button, [efy_card], [efy_tabs] [efy_content], [efy_timer], [efy_clock], [efy_tabs] [efy_tab], [efy_keyboard], [efy_sidebar_btn*=absolute], [efy_select] label, .efy_trans_filter, .efy_btn_trans, .efy_trans):not(.efy_trans_filter_off, .efy_trans_filter_off_all, .efy_trans_filter_off_all *, .efy_sidebar *, [efy_range_text] input){backdrop-filter: ",".efy_3d_front {filter: ",".efy_3d_back {filter: "],a=["!important}","!important}","!important; -webkit-backdrop-filter: ","!important}","!important}"],o=["","","!important}","",""],s=0;s<e.length;s++){$add("style",{class:`efy_css_${e[s]}_filter`},[],$head);let i=$(`.efy_css_${e[s]}_filter`),n={},r=`${e[s]}_filter`,l=`${r}_css`,_=async()=>{["blur","brightness","saturate","contrast","hue-rotate","sepia","invert"].forEach((t=>{n[t]=$(`.efy_${e[s]}_${t}`).value,"blur"==t?n[t]=n[t]+"px":"hue-rotate"==t&&(n[t]=n[t]+"deg")}));let _,f="";if(Object.keys(n).forEach((e=>{f+=` ${e}(${n[e]})`})),"trans"==e[s]){let e="";$("#efy_trans_filter_menu").checked&&(e=", .efy_sidebar",efy.trans_filter_menu="on"),_=t[s]+f+a[s]+f+o[s]+" ::-webkit-progress-bar, ::-webkit-meter-bar"+e+"{backdrop-filter: "+f+a[s]+f+o[s]}else _=_=t[s]+f+a[s],delete efy.trans_filter_menu;$text(i,_),efy[r]=JSON.stringify(n),efy[l]=_,$save()};if(efy[r]){$text(i,efy[l]);let t=JSON.parse(efy[r]);Object.keys(t).forEach((a=>$(`.efy_${e[s]}_${a}`).value=t[a].replace("px","").replace("deg","")))}$all(`.efy_${e[s]}_filter input`).forEach((e=>{$event(e,"input",_)})),$all(`.efy_${e[s]}_filter [type=reset]`).forEach((e=>{$event(e,"pointerup",(()=>{delete efy[r],delete efy[l],$save(),$text(i,""),e.click()}))}))}}if($efy_module("efy_backup")){$add("details",{id:"efy_backup"},[["summary",{efy_lang:"backup"},[["i",{efy_icon:"arrow_down"}]]]],$(".efy_sidebar"));for(let e=["localstorage","idb"],t=["theme","efy_database"],a="#efy_backup",o=0;o<e.length;o++){let s=`efy_${e[o]}`;$add("p",{efy_lang:t[o]},[],$(a)),$add("div",{class:"efy_backup_div"},[["a",{href:"#",class:`${s}_export`,download:`${t[o]}.json`,role:"button",efy_lang:"save"},[["i",{efy_icon:"arrow_down"}]]],["button",{type:"reset",class:`${s}_reset`,efy_lang:"reset"},[["i",{efy_icon:"reload"}]]],["label",{efy_upload:`${s}_import, .json`}]],$(a))}$event($(".efy_idb_reset"),"click",(()=>{indexedDB.deleteDatabase("efy"),location.reload()}))}if($efy_module("efy_language")){let e="en id ro ru de pl sv".split(" "),t="English Indonesia Română Русский Deutsch Polski Svenska".split(" ");$add("details",{id:"efy_language"},[["summary",{efy_lang:"efy_language"},[["i",{efy_icon:"globe"}]]],["div",{efy_select:""},[["p",{efy_lang:"lang_info"},[["a",{href:"https://translate.codeberg.org/projects/efy"}," Weblate"]]]]]],$(".efy_sidebar"));let a=$("#efy_language > div");e.map(((e,o)=>{let s=`efy_language_${e}`;$add("input",{type:"radio",name:"efy_language",id:s},[],a),$add("label",{for:s},[t[o]],a),$event($("#"+s),"click",(()=>{efy.lang_code=e,$save(),location.reload()}))})),efy.lang_code?$(`#efy_language_${efy.lang_code}`).setAttribute("checked",""):$("#efy_language_en").setAttribute("checked","")}if($efy_module("efy_accessibility")){$add("details",{id:"efy_accessibility",efy_select:""},[["summary",{efy_lang:"accessibility"},[["i",{efy_icon:"accessibility"}]]],["details",{id:"efy_accessibility_outline",efy_select:""},[["summary",{efy_lang:"outline"}],["p",{efy_lang:"sidebar_outline_text"}],["input",{id:"efy_outline",type:"checkbox",name:"efy_accessibility"}],["label",{for:"efy_outline",efy_lang:"focus_outline"}]]],["details",{id:"efy_accessibility_animations",efy_select:""},[["summary",{efy_lang:"animations"}],["div",{efy_lang:"speed",efy_range_text:"Speed"},[["input",{class:"efy_anim_speed",type:"range",min:"0",max:"20",value:"1",step:"0.1"}]]]]],["details",{id:"efy_accessibility_text",efy_select:""},[["summary",{efy_lang:"text_size"}],["form",{class:"efy_text_accessibility"},[["div",{efy_lang:"zoom",efy_range_text:"Zoom"},[["input",{class:"efy_ui_zoom",type:"range",min:"1",max:"2",value:"1",step:"0.01"}]]],["div",{efy_lang:"text_spacing",efy_range_text:"Text Spacing"},[["input",{class:"efy_text_spacing",type:"range",min:"0",max:"15",value:"0",step:"1"}]]]]]]],["details",{id:"efy_accessibility_cursor",efy_select:""},[["summary",{efy_lang:"cursor"}],["div",{efy_lang:"sidebar_cursor_text"}]]]],$(".efy_sidebar"));for(let e=["efy_cursor_default","efy_cursor_custom","efy_cursor_none"],t=["default","custom","hide"],a=$("#efy_accessibility_cursor"),o=0;o<e.length;o++)$add("input",{type:"radio",name:"efy_accessibility_cursor",id:e[o]},[],a),$add("label",{for:e[o],efy_lang:t[o]},[],a);$("#efy_cursor_default").setAttribute("checked",""),$add("div",{efy_cursor:""});const e=e=>{const t=`efy_cursor_${e}`;$root.setAttribute(t,""),$(`#${t}`).setAttribute("checked",""),"custom"==e&&$event(document,"pointermove",cursor_fn),efy.cursor=e};["custom","none"].includes(efy.cursor)&&e(efy.cursor),["default","custom","none"].map((t=>{const a=$(`#efy_cursor_${t}`);$event(a,"change",(()=>{a.checked&&("default"==t?($root.removeAttribute("efy_cursor_custom"),$root.removeAttribute("efy_cursor_none"),$event_rm(document,"pointermove",cursor_fn),delete efy.cursor):e(t),$save())}))})),(()=>{let e="--efy_anim_status",t="--efy_anim_state",a=$(".efy_anim_speed");if($add("style",{class:"efy_anim_accessibility"},[],$head),efy.anim_speed){let o=efy.anim_speed;a.value=o,$text($(".efy_anim_accessibility"),`:root {--efy_anim_speed: ${o}!important}`),"0"==o&&($body.style.setProperty(e,"0"),$body.style.setProperty(t,"paused"),$body.setAttribute("efy_animations","off"))}$event(a,"change",(()=>{let o=a.value;efy.anim_speed=o,$save(),"0"==o?($body.style.setProperty(e,"0"),$body.style.setProperty(t,"paused"),$body.setAttribute("efy_animations","off")):($body.style.setProperty(e,"1"),$body.style.setProperty(t,"running"),$body.removeAttribute("efy_animations")),$text($(".efy_anim_accessibility"),`:root {--efy_anim_speed: ${o}!important}`)}))})(),$add("style",{class:"efy_text_accessibility"},[],$head),efy.text_zoom&&($text($(".efy_text_accessibility"),`:root {--efy_font_size: ${efy.text_zoom}px!important} html {letter-spacing: ${efy.text_spacing}px!important}`),$(".efy_ui_zoom").value=efy.text_zoom,$(".efy_text_spacing").value=efy.text_spacing),$all(".efy_text_accessibility input").forEach((e=>$event(e,"input",(()=>{$text($(".efy_text_accessibility"),`:root {--efy_font_size: ${$(".efy_ui_zoom").value}px!important} html {letter-spacing: ${$(".efy_text_spacing").value}px!important}`),efy.text_zoom=$(".efy_ui_zoom").value,efy.text_spacing=$(".efy_text_spacing").value,$save()}))))}if($efy_module("efy_audio")){$add("details",{efy_select:"",id:"efy_audio"},[["summary",{},[["i",{efy_icon:"audio"}],["p",{efy_lang:"audio_effects"}],["mark",{efy_lang:"alpha"}]]],["div",{efy_lang:"efy_volume",efy_range_text:"EFY Volume"},[["input",{class:"efy_audio_volume",type:"range",min:"0",max:"1",value:"1",step:"0.01"}]]],["div",{efy_lang:"page_volume",efy_range_text:"Page Volume"},[["input",{class:"efy_audio_volume_page",type:"range",min:"0",max:"1",value:"1",step:"0.01"}]]],["p",{efy_lang:"sidebar_audio_text"}]],$(".efy_sidebar"));for(let e=["status","click","hover"],t=["active","click_tap","mouse_hover"],a="#efy_audio > summary",o="beforebegin",s=0;s<e.length;s++){const i=`efy_audio_${e[s]}`;$add("input",{type:"checkbox",name:"efy_audio",id:i},[],$(a),o),$add("label",{for:i,efy_lang:t[s]},[],$(a),o)}}"on"==efy.audio_status&&(efy_audio.folder=$css_prop("--efy_audio_folder"),"pop ok ok2 ok3 hover slide step error disabled call wind".split(" ").forEach((e=>{efy_audio[e]=new Audio(`${efy_audio.folder}/${e}.webm`),efy_audio[e].volume=efy_audio.volume})),$event($body,"pointerdown",(()=>{if("on"==efy.audio_click)for(let e="ok ok ok2 ok3 pop slide error disabled step step wind".split(" "),t="pointerup change pointerup pointerup pointerup pointerup pointerup pointerup pointerdown input click".split(" "),a=['button:not([disabled], [type=submit], [type=reset], [efy_tab], [efy_sidebar_btn], [efy_toggle], [efy_keyboard] [efy_key], .shaka-overflow-menu button, .shaka-overflow-menu-button, .shaka-back-to-overflow-button, .efy_quick_fullscreen, [tabindex="-1"], [efy_audio_mute*=ok]), .video-grid>div',"input, textarea",".efy_img_previews [efy_bg_nr]","[type=submit]","summary, [efy_toggle], select:not([multiple], [disabled]), [efy_tabs] [efy_tab], [efy_alert], [efy_alert] *, .shaka-overflow-menu button, .shaka-overflow-menu-button, .shaka-back-to-overflow-button","[efy_sidebar_btn]","[type=reset]","[disabled]","input:not([type=radio], [type=checkbox], [type=reset], [disabled]), textarea:not([disabled]), [efy_keyboard] [efy_key]","input:not([type=radio], [type=checkbox], [type=reset], [disabled]), textarea:not([disabled])",".efy_quick_fullscreen"],o=0;o<e.length;o++)$event($body,t[o],(()=>{event.target.matches(a[o])&&$audio_play(efy_audio[e[o]])}));"on"==efy.audio_hover&&$all("summary, select:not([multiple], [disabled]), [type=submit], [type=reset], [efy_sidebar_btn], .video-grid>div").forEach((e=>$event(e,"mouseenter",(()=>$audio_play(efy_audio.hover)))));for(let e=["online","offline"],t=["ok","error"],a=0;a<e.length;a++)$event(window,e[a],(()=>{$audio_play(efy_audio[t[a]])}))}),{once:!0}),$all(".efy_audio_volume").forEach((e=>e.oninput=()=>{for(let t=Object.keys(efy_audio),a=0;a<t.length;a++)efy_audio[t[a]].volume=e.value})),$all(".efy_audio_volume_page").forEach((e=>e.oninput=()=>{$all("audio, video").forEach((t=>t.volume=e.value))}))),$ready("[efy_upload]",(e=>{let t,a=e.getAttribute("efy_upload"),o=a.match(/\[(.*?)\]/),s=a.replaceAll(" ","").split(","),i="plus";o?(t=o[1],s=a.replace(`[${t}],`,",").replaceAll(" ","").split(",")):t=s[1],s[2]?"small"!==s[2]&&e.setAttribute("efy_lang",s[2]):e.setAttribute("efy_lang","add_file"),s[4]&&(i=s[4]),e.setAttribute("role","button"),$add("input",{type:"file",id:s[0],accept:t},[],e),$add("i",{efy_icon:i},[],e),"multiple"==s[3]&&$all(`#${s[0]}`).forEach((e=>{e.setAttribute("multiple","")}))})),["front","back"].map((e=>{$add("video",{class:`efy_3d_${e}`,autoplay:"",loop:"",muted:"",playsinline:""}),$add("div",{id:`efy_images_${e}`,style:"display: grid"},[["div",{class:"efy_img_previews"},[["input",{id:`idb_addimg_${e}`,type:"file",accept:"image/*, video/*",style:"display: none"}],["label",{for:`idb_addimg_${e}`,title:"Add file",class:"efy_color",type:"button",role:"button"},[["i",{efy_icon:"plus"}]]],["button",{class:`idb_reset_${e}`,title:"reset"},[["i",{efy_icon:"reload"}]]]]],["hr"]],$(`[efy_tabs=efyui_filters] [efy_content=${e}]`),"afterbegin")}));let z={};$ready("#idb_addimg_back",(()=>{["bg","front","back"].map((e=>{let t=`efy_css_${e}`;$add("style",{class:t},[],$head),z[e]=$("."+t),$event($(`#idb_addimg_${e}`),"change",(t=>O(e,t)))}))}),1);const O=async(e,t)=>{let a=await p(),o=new FileReader;o.readAsDataURL(t.target.files[0]),o.onload=t=>{let s,i=o.result,n=new Image,r="efy_temp_canvas";n.onload=()=>{$add("canvas",{id:r},[],$(`#efy_images_${e} .efy_img_previews`));let t=$(`#${r}`);t.width=n.width/n.height*80,t.height=80,t.getContext("2d").drawImage(n,0,0,t.width,t.height),s=$(`#${r}`).toDataURL("image/webp"),t.remove(),a.transaction([e],"readwrite").objectStore(e).add({image:i,thumbnail:s}).onerror=e=>{console.error(e)}},n.src=i,(async()=>{let t=indexedDB.open("efy");t.onsuccess=()=>{let a=0,o=t.result.transaction([e],"readonly").objectStore(e).openCursor();o.onerror=()=>console.error("efy: no db entries"),o.onsuccess=t=>{let o=t.target.result;if(o)a++,o.continue();else{efy[`nr_${e}`]=a,$save();const t=`#efy_images_${e} .efy_img_previews`;$text(z[e],`.efy_3d_${e} {background: url(${i})!important; background-size: var(--efy_bg_size)!important} html {background: var(--efy_text2)!important}`),$add("button",{efy_bg_nr:a,style:`background: url(${s})`},[],$(t));const o=$(`${t} [efy_bg_nr="${a}"]`);$all(`${t} [efy_bg_nr]`).forEach((e=>e.removeAttribute("efy_active"))),o.setAttribute("efy_active",""),$event(o,"click",(()=>{$text(z[e],`.efy_3d_${e} {background: url(${i})!important; background-size: var(--efy_bg_size)!important} html {background: var(--efy_text2)!important}`),efy[`nr_${e}`]=a,$save(),$all(`${t} [efy_bg_nr]`).forEach((e=>e.removeAttribute("efy_active"))),o.setAttribute("efy_active","")})),i.includes("video")&&($(`.efy_3d_${e}`).setAttribute("src",i),$(`.efy_3d_${e}`).volume=0,$event(document,"visibilitychange",(()=>{let t=$(`.efy_3d_${e}`);document.hidden?t.pause():t.play()})))}}}})()}},C=async e=>{let t=0;const a=(await p("efy")).transaction([e],"readonly").objectStore(e),o=a.openCursor();let s=0;o.onsuccess=o=>{const i=o.target.result;if(i){s++;const a=i.value,o=`#efy_images_${e} .efy_img_previews`,n=s;efy[`nr_${e}`]==n&&(t=a.id),$add("button",{efy_bg_nr:a.id,style:`background: url(${a.thumbnail})`,efy_audio_mute:"ok"},[],$(o)),$event($(`${o} [efy_bg_nr="${a.id}"]`),"click",(t=>{$text(z[e],`.efy_3d_${e} {background: url(${a.image})!important; background-size: var(--efy_bg_size)!important} html {background: var(--efy_text2)!important; background-size: cover!important}`),efy[`nr_${e}`]=n,$save(),$all(`${o} [efy_bg_nr]`).forEach((e=>e.removeAttribute("efy_active"))),t.target.setAttribute("efy_active","")})),i.continue()}else s>0&&(a.get(t).onsuccess=t=>{$text(z[e],`.efy_3d_${e} {background: url(${t.target.result.image})!important; background-size: var(--efy_bg_size)!important}`),$(`#efy_images_${e} .efy_img_previews [efy_bg_nr]:nth-of-type(${efy[`nr_${e}`]+1})`).setAttribute("efy_active","")}),$all(".efy_images_reset").forEach((e=>{$event(e,"click",(()=>{d.transaction(["bg"],"readwrite").objectStore("bg").clear().onsuccess=e=>{$all(".efy_img_previews [efy_bg_nr]").forEach((e=>e.remove()))}}))}))},o.onerror=()=>console.error("efy: no db entries")},N=$(".efy_img_previews");$event(N,"click",(e=>{if(e.target.matches(".efy_remove [efy_bg_nr]")){const t=e.target,a=Number(t.getAttribute("efy_bg_nr"));indexedDB.open("efy").onsuccess=e=>{e.target.result.transaction(["bg"],"readwrite").objectStore("bg").delete(a),t.remove()}}else if(e.target.matches("#idb_remove_toggle")){N.classList.toggle("efy_remove"),$(".efy_images_reset").classList.toggle("efy_hide_i");const t=e.target.checked;$notify("short",t?"Remove Media":"Set Background",t?"Select what to remove":"Select your background")}})),(async()=>{await C("bg"),await C("front"),C("back")})(),(async()=>{try{let e=await p(),t=await new Promise(((t,a)=>{let o={},s=e.transaction(e.objectStoreNames,"readonly");$event(s,"error",a);for(let a of e.objectStoreNames){let i=[];$event(s.objectStore(a).openCursor(),"success",(s=>{let n=s.target.result;n?(i.push(n.value),n.continue()):(o[a]=i,e.objectStoreNames.length===Object.keys(o).length&&t(JSON.stringify(o)))}))}}));$event($(".efy_idb_export"),"click",(async()=>{let e=event.target;$audio_play(efy_audio.ok3),e.href=URL.createObjectURL(new Blob([t],{type:"application/json"})),e.setAttribute("download","efy_database.json")}))}catch(e){console.error(e)}})(),$event($("#efy_idb_import"),"change",(async e=>{let t=e.target.files[0],a=new FileReader;a.onload=async()=>{$audio_play(efy_audio.ok3);let e=JSON.parse(a.result),t=Object.keys(e);await(async e=>{let a=(await p()).transaction(t,"readwrite");a.oncomplete=()=>location.reload();for(let o of t){let t=a.objectStore(o);for(let a of e[o])t.put(a)}})(e)},a.readAsText(t)})),$event($(".efy_localstorage_export"),"click",(e=>{if(localStorage.efy){efy.version=efy_version,$save();let t=JSON.stringify(JSON.parse(localStorage.efy),null,2),a=e.target;a.href=URL.createObjectURL(new Blob([t],{type:"application/json"})),a.download="efy_settings.json",$audio_play(efy_audio.ok3)}else $notify("short","Nothing to export","You're using default settings")})),$event($("#efy_localstorage_import"),"change",(e=>{let t=e.target.files[0],a=new FileReader;a.onload=()=>{localStorage.efy=a.result.replaceAll(',\n"',',"').replaceAll('{\n"','{"').replaceAll('"\n}','"}'),location.reload()},a.readAsText(t)})),$all(".efy_localstorage_reset").forEach((e=>{$event(e,"click",(()=>{localStorage.removeItem("efy"),location.reload()}))})),$ready("[efy_tabs]",(e=>{$event(e,"click",(e=>{const t=e.target;if(!t.matches("[efy_tab]"))return;e.stopPropagation();const a=`[efy_tabs="${t.closest("[efy_tabs]").getAttribute("efy_tabs")}"]`,o=t.hasAttribute("efy_active"),s=`:is(${a}, ${a} > div, ${a} > div > div) >`,i=$(`${s} [efy_content="${t.getAttribute("efy_tab")}"]`),n=(e,t)=>e[t?"removeAttribute":"setAttribute"]("efy_active","");$all(`${s} :is([efy_tab], [efy_content])[efy_active]`).forEach((e=>n(e,!0))),[t,i].forEach((e=>n(e,o)))}))})),$ready("[efy_code]",(e=>{let t=e.getAttribute("efy_code").split(","),a=e.getAttribute("efy_code").length+2;$add("div",{class:"efy_bar"},[["mark",{},t[0]],["div",{},[["button",{class:"efy_code_trans"},"transparent"],["button",{class:"efy_fs"},[["i",{efy_icon:"fullscreen"}]]],["button",{class:"efy_copy"},[["i",{efy_icon:"copy"}]]]]]],e,"afterbegin"),$event(e,"click",(t=>{if((t=t.target).matches(".efy_fs"))document.fullscreenElement?document.exitFullscreen():e.requestFullscreen();else if(t.matches(".efy_code_trans"))$body.classList.toggle("efy_code_trans_on");else if(t.matches(".efy_copy")){let t=e.innerText,o=t.substring(t.indexOf("copy")+a);navigator.clipboard.writeText(o),0!=efy.notify_clipboard&&$notify("short","Copied to clipboard",o)}}))})),$ready("[efy_range_text]",(e=>{const t=$$(e,"input[type=range]"),a=$add("input",{class:"efy_range_text_p",type:"number",value:t.value,step:t.step,min:t.min,max:t.max,name:"efy_name"},[],e,"afterbegin");t.setAttribute("aria-hidden",""),t.setAttribute("tabindex","-1"),$event(a,"input",(e=>{t.value=e.target.value,t.dispatchEvent(new Event("input",{bubbles:!0}))})),$event(t,"input",(e=>a.value=e.target.value))})),$all("form[class*=efy]").forEach((e=>{$event(e,"reset",(()=>{$$all(e,"[efy_range_text]").forEach((e=>{$$(e,".efy_range_text_p").value=$$(e,"input").value}))}))}));let T=e=>(e<10&&(e="0"+e),e),R=()=>{let e=new Date,t=e.getHours(),a=T(e.getMinutes()),o="";$all("[efy_clock]").forEach((s=>{let i="";s.getAttribute("efy_clock").includes("12")&&(i=t<12?" AM":" PM"),s.getAttribute("efy_clock").includes("hms")&&(o=T(e.getSeconds()));let n="hour s1 minute s2 second format".split(" ");[t,":",a,":",o,i].map(((e,t)=>{$$(s,"."+n[t]).textContent=e}))}))};$ready("[efy_clock]",(e=>{"hour s1 minute s2 second format".split(" ").map((t=>{$add("p",{class:t},[],e)})),$wait(.1,R),setInterval(R,1e3)})),$ready("[efy_timer]",(e=>{let t=e.getAttribute("efy_timer").replaceAll(" ","").split(","),a="00:00:00";void 0!==t[1]&&(a=$sec_time(t[1])),$add("div",{efy_text:""},[a],e),$add("button",{efy_start:"",title:"Start or Pause"},[],e),$add("button",{efy_reset:"",title:"Reset"},[],e);let o,s=$$(e,"[efy_start]"),i=$$(e,"[efy_reset]"),n=$$(e,"[efy_text]"),r=0;const l=()=>{clearInterval(o),r=0,"reverse"==t[2]?$text(n,$sec_time(t[1])):$text(n,"00:00:00"),s.removeAttribute("efy_active")};$event(s,"click",(()=>{clearInterval(o),s.toggleAttribute("efy_active"),s.hasAttribute("efy_active")?o=setInterval((()=>{"reverse"==t[2]?(r++,$text(n,$sec_time(t[1]-r))):(r++,$text(n,$sec_time(r))),r==t[1]&&($notify("infinite","Done!","Time is up!"),$audio_play(efy_audio.call,"loop"),l(),$event($("[efy_alert]"),"click",(()=>{try{efy_audio.call.pause()}catch{}})))}),1e3):clearInterval(o)})),$event(i,"click",l)})),$ready("[efy_search]",(e=>{let t=e,a=t.getAttribute("efy_search"),o=`#${t.id}[efy_search="${a}"]`,s=$(o+" [efy_search_input]");$event(s,"keyup",(()=>{let e=s.value.toLowerCase();$all(o+" "+a).forEach((t=>{0==t.textContent.toLowerCase().includes(e)?t.classList.add("efy_hide_i"):t.classList.remove("efy_hide_i")}))}))})),$ready("[efy_toggle]",(e=>{let t=e.getAttribute("efy_toggle");$event(e,"click",(()=>{$all(t).forEach((e=>{e.classList.toggle("efy_hide_i"),e.classList.contains("efy_hide_i")?e.setAttribute("tabindex","-1"):e.removeAttribute("tabindex")}))}))})),$add("div",{efy_alerts:"",class:"efy_sidebar_width"},[],$body,"afterbegin"),$event($body,"pointerup",(()=>{let e=event.target;if(e.matches("[efy_alert]")){let t=e.classList[0],a=()=>{let e=$all(".efy_quick_notify_content [efy_alert]").length>0?"_active":"";$(".efy_quick_notify i").setAttribute("efy_icon","notify"+e)};e.classList.add("efy_anim_remove"),$wait(.05*$css_prop("--efy_anim_speed"),(()=>{e.remove();try{$(`.efy_quick_notify_content [efy_alert].${t}`).remove(),clearInterval(efy_timer_interval)}catch{}a()}))}})),$add("i",{efy_lang:"no_notifications",style:"opacity: 0; pointer-events: none; position: absolute"},[],$(".efy_sidebar")),$all('input[type="range"], .plus-btn, .minus-btn').forEach((e=>$event(e,"contextmenu",(()=>event.preventDefault())))),$(".efy_lang_app_file").onload=()=>{const e=new WeakSet;new MutationObserver((t=>{for(let a of t)"childList"===a.type&&($$all(a.target,"[efy_lang]").forEach((t=>{if(!e.has(t)){const a=getComputedStyle($("[efy_lang]")).getPropertyValue(`--${t.getAttribute("efy_lang")}`);t.insertAdjacentText($$(t,"[efy_icon]")?"beforeend":"afterbegin",t.hasAttribute("efy_range_text")?`${a}:`:a),e.add(t)}})),a.removedNodes.forEach((t=>{1===t.nodeType&&e.delete(t)})))})).observe(document.body,{childList:!0,subtree:!0}),['"Max Width"'].map((e=>{$add("mark",{efy_lang:"alpha"},[],$(`[efy_content=size] [efy_range_text*=${e}] .efy_range_text_p`),"afterend")})),$add("style",{},[`.efy_quick_notify_content:empty:before {content: '${efy_lang.no_notifications}'}`],$head),["extra"].map((e=>{$efy_module(`efy_${e}`)&&($add("link",{href:`${efy.folder}/${e}.css`,rel:"stylesheet"},[],$head),"http"==$css_prop("--efy_protocol")?$add("script",{src:`${efy.folder}/${e}.js`,type:"module"},[],$head):$add("script",{src:`${efy.folder}/${e}_local.js`},[],$head))})),["offline","online"].map(((e,t)=>{$event(window,e,(()=>{if(!1!==efy.notify_offline){const t=["",$("[efy_lang]")],a=`--${e}_notify`;$notify("short",$css_prop(a,...t),$css_prop(`${a}_text`,...t))}}))}))},$event(document,"keydown",(e=>{const t=e.key,a=document.activeElement;" "!==t&&"Enter"!==t||a.matches("[efy_tabs] input[efy_tab]")&&a.dispatchEvent(new Event("click",{bubbles:!0}))}))};